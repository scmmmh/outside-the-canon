{% extends 'base.html' %}

{% block title %}{{ page.title }}{% endblock title %}

{% block content %}
<main class="person">
  <div class="grid-x grid-padding-x">
    <div class="cell auto">
      <h1>{{ page.title }}</h1>
    </div>
    <nav class="cell shrink">
      <ul class="menu">
        <li class="menu-text">
          {% if page.verification == 'full' %}
            <span title="{% trans %}The information on this page has been verified{% endtrans %}">
              <svg viewBox="0 0 24 24" class="icon success">
                <path d="M21,4H16V20H21V4M14,9H9V20H14V9M7,14H2V20H7V14Z" />
              </svg>
            </span>
          {% elif page.verification == 'partial' %}
            <span title="{% trans %}The information on this page has been verified partially{% endtrans %}">
              <svg viewBox="0 0 24 24" class="icon warning">
                <path d="M19.5,5.5V18.5H17.5V5.5H19.5M21,4H16V20H21V4M14,9H9V20H14V9M7,14H2V20H7V14Z" />
              </svg>
            </span>
          {% else %}
            <span title="{% trans %}The information on this page has not been verified{% endtrans %}">
              <svg viewBox="0 0 24 24" class="icon alert">
                <path d="M19.5,5.5V18.5H17.5V5.5H19.5M12.5,10.5V18.5H10.5V10.5H12.5M21,4H16V20H21V4M14,9H9V20H14V9M7,14H2V20H7V14Z" />
              </svg>
            </span>
          {% endif %}
        </li>
      </ul>
    </nav>
  </div>
  <div class="grid-x grid-padding-x">
    <div class="cell small-12 medium-8 large-7">
      <section>{{ page.content }}</section>
      {% if page.works %}
        <section>
          <h2>{% trans %}Works{% endtrans %}</h2>
          {% for grouper, items in page.works|groupby('value.provider.title') %}
            <section>
              <h3>{{ grouper }}</h3>
              <ul class="no-bullet">
                {% for work in items %}
                  <li class="grid-x">
                    <div class="cell auto"><a href="{{ work.value.url }}">{{ work.value.title }}</a></div>
                    <div class="cell shrink license">
                      {% if work.value.license.type == 'cc-by' %}
                        {% if work.value.license.url %}
                        <a href="{{ work.value.license.url }}" target="_blank" rel="noopener">
                        {% else %}
                          <a href="https://creativecommons.org/licenses/cc/by/legalcode" target="_blank" rel="noopener">
                        {% endif %}
                          <img src="https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/by.svg" alt="{{ work.value.license }}" style="opacity:0.6"/>
                        </a>
                      {% endif %}
                    </div>
                  </li>
                {% endfor %}
              </ul>
            </section>
          {% endfor %}
        </section>
      {% endif %}
      {% if page.link %}
        <section>
          <h2>{% trans %}Links{% endtrans %}</h2>
          <ul class="no-bullet grid-x grid-padding-x">
            {% for link in page.link %}
              <li class="cell small-6 medium-4 large-3"><a href="{{ link.value }}">{{ link.label }}</a></li>
            {% endfor %}
          </ul>
        </section>
      {% endif %}
      {% if page.sources %}
        <section class="sources">
          <h2>{% trans %}Sources{% endtrans %}</h2>
          <ul class="no-bullet grid-x grid-padding-x">
            {% for source in page.sources.values() %}
              <li class="cell small-12 margin-bottom">
                <div class="label">{{ source.label }}</div>
                <div class="source"><a href="{{ source.url }}">{{ source.url }}</a></div>
                <div class="timestamp">
                  <ul class="inline">
                    {% for timestamp in source.timestamps %}
                      <li>{{ timestamp|format_timestamp }}</li>
                    {% endfor %}
                  </ul>
                </div>
              </li>
            {% endfor %}
          </ul>
        </section>
      {% endif %}
    </div>
    <aside class="cell small-12 medium-4 large-5">
      <div class="grid-x grid-padding-x">
        <div class="cell small-12">
          <h2>{% trans %}Personal Information{% endtrans %}</h2>
        </div>
        {% for label, field, type in PERSON_METADATA %}
          {% if page[field] and page[field] %}
            <section class="cell small-12 large-6">
              <h3>{{ label }}</h3>
              <ul class="no-bullet">
                {% for value in page[field] %}
                  <li>{% if type == 'timestamp' %}{{ value.value|format_timestamp }}{% else %}{% if value.label %}{{ value.label }}{% else %}{{ value.value }}{% endif %}{% endif %}</li>
                {% endfor %}
              </ul>
            </section>
          {% endif %}
        {% endfor %}
      </div>
    </aside>
  </div>
</main>
{% endblock content %}
